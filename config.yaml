gdl90:
    dest: 192.168.10.255:4000
    interval: 1s
    record:
        enable: false
        path: ./gdl90-record.log
    replay:
        enable: false
        path: ./gdl90-record.log
        speed: 1
        loop: false
gps:
    enable: true
    source: gpsd
    gpsd_addr: 127.0.0.1:2947
    device: /dev/stratux-gps
    baud: 9600
    horizontal_accuracy_m: 10
sim:
    ownship:
        center_lat_deg: 45.5404
        center_lon_deg: -122.9498
        alt_feet: 3000
        ground_kt: 90
        gps_horizontal_accuracy_m: 50
        radius_nm: 0.5
        period: 2m0s
        icao: F00000
        callsign: STRATUX
    traffic:
        enable: false
        count: 6
        radius_nm: 2
        period: 1m30s
        ground_kt: 120
    scenario:
        enable: false
        path: ./configs/scenarios/edgecases.yaml
        start_time_utc: "2020-01-01T00:00:00Z"
        loop: false
ahrs:
    enable: true
    i2c_bus: 1
    imu_addr: 104
    baro_addr: 119
    orientation:
        forward_axis: 2
        gravity_in_sensor:
            - -0.006832413723942425
            - -0.11065199776608238
            - -0.9938357276296117
fan:
    enable: true
    backend: auto
    pwm_pin: 18
    pwm_frequency: 64000
    temp_target_c: 50
    pwm_duty_min: 0
    update_interval: 5s
web:
    listen: :8080

wifi:
    mode: ap
    ssid: stratux-ng
    passphrase: ""
    country: US
    channel: 6
    subnet_cidr: 192.168.10.0/24
    ap_ip: 192.168.10.1
    dhcp_start: 192.168.10.50
    dhcp_end: 192.168.10.150
    uplink_enable: false
    internet_passthrough_enable: false
    client_networks: []

# External decoders
#
# Stratux-NG can ingest:
# - NDJSON-over-TCP (e.g. dump978-fa JSON stream)
# - a periodically-updated JSON file (e.g. dump1090-fa aircraft.json)
#
# Recommended SDR identification: program EEPROM serial tags (e.g. stratux:1090
# and stratux:978) and select devices by serial.
adsb1090:
    enable: true
    decoder:
        # Option A (supervised): run dump1090-fa and poll its aircraft.json.
        command: dump1090-fa
        args:
            - --device-type
            - soapy
            - --device
            - driver=rtlsdr,serial=stx:1090:0
            - --write-json
            - /run/dump1090-fa
            - --write-json-every
            - "1"
        json_file: /run/dump1090-fa/aircraft.json
        json_file_interval: 1s
        # Option B (external): leave command empty and still set json_file.
        # command: ""
    sdr:
        serial_tag: stx:1090:0

uat978:
    enable: true
    decoder:
        command: dump978-fa
        args:
            - --sdr
            - driver=rtlsdr,serial=stx:978:0
            - --json-port
            - "30978"
            # Raw UAT uplinks (FIS-B weather) for Garmin Pilot / Stratux-like behavior.
            - --raw-port
            - "30979"
        json_listen: 127.0.0.1:30978
        raw_listen: 127.0.0.1:30979
        # json_addr: 127.0.0.1:30978
    sdr:
        serial_tag: stx:978:0
