#!/usr/bin/env bash
set -euo pipefail

# Create the ap0 virtual interface for Stratux-NG Wi-Fi AP mode.
# Safe to call multiple times; exits cleanly if the interface already exists.

STA_IFACE="wlan0"
AP_IFACE="ap0"

if iw dev "${AP_IFACE}" info >/dev/null 2>&1; then
  exit 0
fi

iw dev "${STA_IFACE}" info >/dev/null

iw dev "${STA_IFACE}" interface add "${AP_IFACE}" type __ap
