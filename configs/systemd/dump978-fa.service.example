# Example systemd unit for dump978-fa (978 UAT).
#
# This is OPTIONAL. Stratux-NG can also supervise dump978-fa directly via config.yaml.
# Use this unit if you prefer to run decoders as separate services.
#
# Install (example):
#   sudo install -m 644 configs/systemd/dump978-fa.service.example /etc/systemd/system/dump978-fa.service
#   sudo systemctl daemon-reload
#   sudo systemctl enable --now dump978-fa
#
# Notes:
# - Binds JSON output to 127.0.0.1 only.
# - If using this unit, configure Stratux-NG to connect to json_addr and do NOT run the decoder itself:
#     uat978.enable: true
#     uat978.decoder.command: ""            # empty
#     uat978.decoder.json_addr: 127.0.0.1:30978

[Unit]
Description=dump978-fa (978 UAT decoder)
Wants=network-online.target
After=network-online.target

[Service]
Type=simple
ExecStart=/usr/local/bin/dump978-fa \
  --sdr driver=rtlsdr,serial=stx:978:0 \
  --json-port 127.0.0.1:30978
Restart=on-failure
RestartSec=1

StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
