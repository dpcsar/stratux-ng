<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <title>Stratux-NG</title>
    <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <link rel="stylesheet" href="/assets/app.css" />
  </head>
  <body>
    <header class="topbar">
      <button id="btn-more" class="iconbtn" aria-label="Menu" title="Menu">
        <span class="icon">☰</span>
      </button>
      <div class="titleblock">
        <div class="title">Stratux-NG</div>
        <div id="subtitle" class="subtitle"></div>
      </div>
      <div class="topbar-right">
        <span id="st-now" class="topbar-time muted" aria-live="polite">--</span>
        <span
          id="top-connection-badge"
          class="status-badge status-badge-muted"
          role="status"
          aria-live="polite"
          aria-label="Connection state"
        >--</span>
      </div>
    </header>

    <main id="content" class="content" role="main">
      <section id="view-attitude" class="view" aria-label="Attitude">
        <h2>Attitude</h2>
        <div class="card">
          <div class="attitude-instrument">
            <div class="attitude-row">
              <canvas id="att-tape-left" class="attitude-side-tape left" aria-label="Ground speed tape" role="img"></canvas>
              <div class="attitude-core">
                <div class="attitude-overlay" aria-hidden="true">
                  <div class="attitude-overlay-col">
                    <div class="attitude-overlay-kv"><span class="muted">PIT</span> <span id="att-pitch"></span></div>
                    <div class="attitude-overlay-kv"><span class="muted">ROL</span> <span id="att-roll"></span></div>
                  </div>
                  <div class="attitude-overlay-col right">
                    <div class="attitude-overlay-kv"><span class="muted">HDG</span> <span id="att-heading"></span></div>
                    <div class="attitude-overlay-kv"><span class="muted">PALT</span> <span id="att-palt"></span></div>
                  </div>
                </div>

                <div class="attitude-overlay-bottom-right" aria-hidden="true">
                  <div class="attitude-overlay-kv"><span class="muted">AHRS</span> <span id="att-valid"></span></div>
                  <div class="attitude-overlay-kv"><span class="muted">GPS</span> <span id="att-gps"></span></div>
                </div>

                <div class="attitude-overlay-bottom-left" aria-hidden="true">
                  <div class="attitude-overlay-kv"><span class="muted">G</span> <span id="att-g"></span></div>
                  <div class="attitude-overlay-kv"><span class="muted">MIN</span> <span id="att-gmin"></span></div>
                  <div class="attitude-overlay-kv"><span class="muted">MAX</span> <span id="att-gmax"></span></div>
                </div>
                <canvas id="att-canvas" class="attitude-canvas" aria-label="Attitude indicator" role="img"></canvas>
              </div>
              <canvas id="att-tape-right" class="attitude-side-tape right" aria-label="GPS altitude tape" role="img"></canvas>
            </div>
          </div>

          <canvas id="att-hdg-tape" class="attitude-tape" aria-label="Heading tape" role="img"></canvas>

          <div class="attitude-controls">
            <button id="btn-att-ahrs-level" type="button" class="secondary">Set Level</button>
            <button id="btn-att-ahrs-zero-drift" type="button" class="secondary">Zero Drift</button>
            <span id="att-ahrs-msg" class="muted"></span>
          </div>
        </div>
      </section>

      <section id="view-radar" class="view" aria-label="Radar">
        <h2>Radar</h2>
        <div class="radar-root" aria-label="Traffic radar">
          <canvas id="radar-canvas" class="radar-canvas" role="img" aria-label="Traffic radar"></canvas>

          <div class="radar-top" aria-label="Radar top controls">
            <div class="radar-top-left card" aria-label="Radar range">
              <div class="radar-card-title" aria-hidden="true">RNG</div>
              <div class="radar-controls-row">
                <button id="radar-zoom-out" type="button" class="secondary" aria-label="Zoom out">−</button>
                <span id="radar-range-value" class="radar-pill" aria-label="Range">-- nm</span>
                <button id="radar-zoom-in" type="button" class="secondary" aria-label="Zoom in">+</button>
              </div>
            </div>

            <div class="radar-top-right card" aria-label="Radar alerts">
              <div class="radar-card-title" aria-hidden="true">Alert</div>
              <div class="radar-controls-row radar-alerts-mode-row">
                <button id="radar-alerts-toggle" type="button" class="secondary" aria-pressed="false">--</button>
              </div>

              <div class="radar-controls-row" aria-label="Alert range">
                <div class="radar-step" role="group" aria-label="Alert range">
                  <button id="radar-alert-range-down" type="button" class="secondary" aria-label="Decrease alert range">−</button>
                  <span id="radar-alert-range-value" class="radar-pill" aria-label="Alert range value">-- nm</span>
                  <button id="radar-alert-range-up" type="button" class="secondary" aria-label="Increase alert range">+</button>
                </div>
              </div>

              <div class="radar-controls-row" aria-label="Alert altitude band">
                <div class="radar-step" role="group" aria-label="Alert altitude band">
                  <button id="radar-alert-alt-down" type="button" class="secondary" aria-label="Decrease alert altitude band">−</button>
                  <span id="radar-alert-alt-value" class="radar-pill" aria-label="Alert altitude band value">±-- ft</span>
                  <button id="radar-alert-alt-up" type="button" class="secondary" aria-label="Increase alert altitude band">+</button>
                </div>
              </div>
            </div>
          </div>

          <div id="radar-msg" class="radar-msg" aria-live="polite"></div>
        </div>
      </section>

      <section id="view-map" class="view" aria-label="Map">
        <h2>Map</h2>
        <div class="map-root" aria-label="Map view">
          <div id="map-leaflet" class="map-leaflet" role="img" aria-label="Map"></div>

          <div class="map-infobar card" aria-label="Map information">
            <span id="map-info" class="map-infobar-text">--</span>
          </div>

          <div id="map-trafficbox" class="map-trafficbox card" aria-label="Selected traffic">
            <div id="map-trafficbox-lines" class="map-trafficbox-lines"></div>
          </div>

          <div id="map-msg" class="map-msg" aria-live="polite"></div>
        </div>
      </section>

      <section id="view-status" class="view" aria-label="Status">

        <div class="status-panel card" aria-label="Overall status">
          <div class="status-panel-head">
            <div class="status-panel-lead">
              <div class="status-panel-title">Status</div>
              <div id="st-status-subtitle" class="status-panel-subtitle muted">Waiting for data...</div>
            </div>
          </div>
          <div class="status-panel-body">
            <div class="status-metrics-label status-metrics-label-system">System</div>
            <div class="status-metrics status-metrics-system">
              <div class="status-metric">
                <span class="status-label">Uptime</span>
                <span id="st-summary-uptime" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">GDL90 Dest</span>
                <span id="st-summary-gdl90" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">Frames Sent</span>
                <span id="st-summary-frames" class="status-value">--</span>
              </div>
              <div class="status-metric status-metric-duo">
                <span class="status-label">CPU / Fan</span>
                <span class="status-value status-value-pair">
                  <span id="st-summary-cpu" class="status-value-primary">--</span>
                  <span class="status-value-divider">/</span>
                  <span id="st-summary-fan-duty" class="status-value-secondary">--</span>
                </span>
              </div>
              <div class="status-metric">
                <span class="status-label">Disk Free</span>
                <span id="st-summary-disk" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">uap0</span>
                <span id="st-summary-uap0" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">wlan0</span>
                <span id="st-summary-wlan0" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">Ownship ICAO</span>
                <span id="st-summary-icao" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">Ownship Callsign</span>
                <span id="st-summary-callsign" class="status-value">--</span>
              </div>
            </div>

            <div class="status-metrics-label status-metrics-label-gps">GPS</div>
            <div class="status-metrics status-metrics-gps">
              <div class="status-metric">
                <span class="status-label">Enabled</span>
                <span class="status-value status-value-indicator">
                  <span
                    id="st-summary-gps-enabled"
                    class="status-indicator status-indicator-muted"
                    role="img"
                    aria-label="GPS state unknown"
                  ></span>
                </span>
              </div>
              <div class="status-metric">
                <span class="status-label">Fix Mode</span>
                <span id="st-summary-gps-fixmode" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">Horiz Acc (m)</span>
                <span id="st-summary-gps-hacc" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">Vert Acc (m)</span>
                <span id="st-summary-gps-vacc" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">Latitude</span>
                <span id="st-summary-gps-lat" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">Longitude</span>
                <span id="st-summary-gps-lon" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">Altitude (ft)</span>
                <span id="st-summary-gps-alt" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">Ground Speed (kt)</span>
                <span id="st-summary-gps-ground" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">Track (deg)</span>
                <span id="st-summary-gps-track" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">Vertical Speed (fpm)</span>
                <span id="st-summary-gps-vs" class="status-value">--</span>
              </div>
            </div>

            <div class="status-metrics-label status-metrics-label-ahrs">AHRS</div>
            <div class="status-metrics status-metrics-ahrs">
              <div class="status-metric">
                <span class="status-label">IMU</span>
                <span class="status-value status-value-indicator">
                  <span
                    id="st-summary-ahrs-imu"
                    class="status-indicator status-indicator-muted"
                    role="img"
                    aria-label="AHRS IMU state unknown"
                  ></span>
                </span>
              </div>
              <div class="status-metric">
                <span class="status-label">Baro</span>
                <span class="status-value status-value-indicator">
                  <span
                    id="st-summary-ahrs-baro"
                    class="status-indicator status-indicator-muted"
                    role="img"
                    aria-label="AHRS Baro state unknown"
                  ></span>
                </span>
              </div>
              <div class="status-metric">
                <span class="status-label">Orientation</span>
                <span id="st-summary-ahrs-orientation" class="status-value">--</span>
              </div>
            </div>

            <div class="status-metrics-label status-metrics-label-sdr">SDRs</div>
            <div class="status-sdr-grid">
              <div class="status-sdr-card" aria-label="1090 MHz SDR">
                <div class="status-sdr-title">
                  <span>1090 MHz</span>
                  <span class="status-sdr-tag">ADSB</span>
                </div>
                <div class="status-sdr-pill">
                  <span class="status-label">Radio</span>
                  <span
                    id="st-sdr-1090-enabled"
                    class="status-indicator status-indicator-muted"
                    role="img"
                    aria-label="1090 SDR state unknown"
                  ></span>
                </div>
                <div class="status-sdr-row">
                  <span class="status-sdr-key">Serial Tag</span>
                  <span id="st-sdr-1090-serial" class="status-sdr-val">--</span>
                </div>
                <div class="status-sdr-row">
                  <span class="status-sdr-key">Input</span>
                  <span id="st-sdr-1090-source" class="status-sdr-val">--</span>
                </div>
                <div class="status-sdr-row">
                  <span class="status-sdr-key">Supervisor</span>
                  <span id="st-sdr-1090-supervisor" class="status-sdr-val">--</span>
                </div>
                <div class="status-sdr-row">
                  <span class="status-sdr-key">Feeds</span>
                  <span id="st-sdr-1090-feed" class="status-sdr-val">--</span>
                </div>
              </div>

              <div class="status-sdr-card" aria-label="978 MHz SDR">
                <div class="status-sdr-title">
                  <span>978 MHz</span>
                  <span class="status-sdr-tag">UAT</span>
                </div>
                <div class="status-sdr-pill">
                  <span class="status-label">Radio</span>
                  <span
                    id="st-sdr-978-enabled"
                    class="status-indicator status-indicator-muted"
                    role="img"
                    aria-label="978 SDR state unknown"
                  ></span>
                </div>
                <div class="status-sdr-row">
                  <span class="status-sdr-key">Serial Tag</span>
                  <span id="st-sdr-978-serial" class="status-sdr-val">--</span>
                </div>
                <div class="status-sdr-row">
                  <span class="status-sdr-key">Input</span>
                  <span id="st-sdr-978-source" class="status-sdr-val">--</span>
                </div>
                <div class="status-sdr-row">
                  <span class="status-sdr-key">Supervisor</span>
                  <span id="st-sdr-978-supervisor" class="status-sdr-val">--</span>
                </div>
                <div class="status-sdr-row">
                  <span class="status-sdr-key">Feeds</span>
                  <span id="st-sdr-978-feed" class="status-sdr-val">--</span>
                </div>
              </div>
            </div>

          </div>
        </div>

      </section>

      <section id="view-traffic" class="view" aria-label="Traffic">
        <div class="traffic-panel status-panel" aria-label="Traffic pipeline overview">
          <div class="status-panel-head">
            <div class="status-panel-lead">
              <div class="status-panel-title">Traffic</div>
              <div class="status-panel-subtitle muted">GDL90 output plus decoder feed health</div>
            </div>
            <span id="tr-gdl90-state" class="status-badge status-badge-muted" role="status">--</span>
          </div>

          <div class="status-panel-body traffic-panel-body" aria-label="Traffic sections">
            <div class="traffic-metrics-label traffic-metrics-label-main">GDL90 Output</div>
            <div class="status-metrics traffic-summary-metrics">
              <div class="status-metric">
                <span class="status-label">Destination</span>
                <span id="tr-gdl90-dest" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">Interval</span>
                <span id="tr-gdl90-interval" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">Frames Sent</span>
                <span id="tr-gdl90-frames" class="status-value">--</span>
              </div>
              <div class="status-metric">
                <span class="status-label">Active Targets</span>
                <span id="tr-gdl90-targets" class="status-value">--</span>
              </div>
            </div>

            <div class="traffic-table" aria-label="Traffic targets list">
              <div class="traffic-table-headline">
                <div class="traffic-label">Targets</div>
                <div class="traffic-table-controls" role="group" aria-label="Toggle traffic columns">
                  <label class="traffic-toggle">
                    <input type="checkbox" data-traffic-col="alt" data-traffic-col-toggle checked />
                    <span>Altitude</span>
                  </label>
                  <label class="traffic-toggle">
                    <input type="checkbox" data-traffic-col="gs" data-traffic-col-toggle checked />
                    <span>Ground Speed</span>
                  </label>
                  <label class="traffic-toggle">
                    <input type="checkbox" data-traffic-col="track" data-traffic-col-toggle checked />
                    <span>Track</span>
                  </label>
                  <label class="traffic-toggle">
                    <input type="checkbox" data-traffic-col="vs" data-traffic-col-toggle checked />
                    <span>Vertical Speed</span>
                  </label>
                  <label class="traffic-toggle">
                    <input type="checkbox" data-traffic-col="age" data-traffic-col-toggle checked />
                    <span>Age</span>
                  </label>
                  <label class="traffic-toggle">
                    <input type="checkbox" data-traffic-col="flags" data-traffic-col-toggle checked />
                    <span>Flags</span>
                  </label>
                </div>
              </div>

              <div class="traffic-table-wrap">
                <table class="traffic-table-grid" aria-label="Traffic targets table">
                  <thead>
                    <tr id="tr-gdl90-table-head"></tr>
                  </thead>
                  <tbody id="tr-gdl90-table-body"></tbody>
                </table>
              </div>
            </div>

            <div class="traffic-metrics-label traffic-metrics-label-decoder">Decoder Feeds</div>
            <div class="status-sdr-grid traffic-sdr-grid" aria-label="Decoder sections">
              <div class="status-sdr-card traffic-feed-card" aria-label="dump1090 feed details">
                <div class="status-sdr-title">
                  <span>1090 MHz</span>
                  <span class="status-sdr-tag">dump1090</span>
                </div>
                <div class="traffic-feed-pill">
                  <span class="status-label">State</span>
                  <span id="tr-adsb-badge" class="status-badge status-badge-muted status-badge-compact" role="status">--</span>
                </div>
                <div class="traffic-feed-row">
                  <span class="traffic-feed-key">Radio</span>
                  <span class="traffic-feed-val"><span id="tr-adsb-radio" class="status-indicator status-indicator-muted" role="img" aria-label="1090 radio state unknown"></span></span>
                </div>
                <div class="traffic-feed-row">
                  <span class="traffic-feed-key">Serial Tag</span>
                  <span id="tr-adsb-serial" class="traffic-feed-val">--</span>
                </div>
                <div class="traffic-feed-row">
                  <span class="traffic-feed-key">Input</span>
                  <span id="tr-adsb-input" class="traffic-feed-val">--</span>
                </div>
                <div class="traffic-feed-row">
                  <span class="traffic-feed-key">Supervisor</span>
                  <span id="tr-adsb-supervisor" class="traffic-feed-val">--</span>
                </div>
                <div class="traffic-feed-grid" aria-label="dump1090 feeds">
                  <div>
                    <div class="traffic-feed-label">NDJSON Stream</div>
                    <div id="tr-adsb-stream" class="traffic-feed-value">--</div>
                  </div>
                </div>
                <div class="traffic-feed-note" id="tr-adsb-error" aria-live="polite"></div>
              </div>

              <div class="status-sdr-card traffic-feed-card" aria-label="dump978 feed details">
                <div class="status-sdr-title">
                  <span>978 MHz</span>
                  <span class="status-sdr-tag">dump978</span>
                </div>
                <div class="traffic-feed-pill">
                  <span class="status-label">State</span>
                  <span id="tr-uat-badge" class="status-badge status-badge-muted status-badge-compact" role="status">--</span>
                </div>
                <div class="traffic-feed-row">
                  <span class="traffic-feed-key">Radio</span>
                  <span class="traffic-feed-val"><span id="tr-uat-radio" class="status-indicator status-indicator-muted" role="img" aria-label="978 radio state unknown"></span></span>
                </div>
                <div class="traffic-feed-row">
                  <span class="traffic-feed-key">Serial Tag</span>
                  <span id="tr-uat-serial" class="traffic-feed-val">--</span>
                </div>
                <div class="traffic-feed-row">
                  <span class="traffic-feed-key">Input</span>
                  <span id="tr-uat-input" class="traffic-feed-val">--</span>
                </div>
                <div class="traffic-feed-row">
                  <span class="traffic-feed-key">Supervisor</span>
                  <span id="tr-uat-supervisor" class="traffic-feed-val">--</span>
                </div>
                <div class="traffic-feed-grid" aria-label="dump978 feeds">
                  <div>
                    <div class="traffic-feed-label">NDJSON Stream</div>
                    <div id="tr-uat-stream" class="traffic-feed-value">--</div>
                  </div>
                  <div>
                    <div class="traffic-feed-label">Raw Stream</div>
                    <div id="tr-uat-raw" class="traffic-feed-value">--</div>
                  </div>
                </div>
                <div class="traffic-feed-note" id="tr-uat-error" aria-live="polite"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="view-weather" class="view" aria-label="Weather">
        <div class="status-panel status-panel-utility" aria-label="Weather status">
          <div class="status-panel-head">
            <div class="status-panel-lead">
              <div class="status-panel-title">Weather</div>
              <div class="status-panel-subtitle muted">Stratux-NG relays 978 UAT uplinks (FIS-B) to EFBs; this UI shows relay health (not decoded products).</div>
            </div>
          </div>

          <div class="status-panel-body">
            <div class="panel-grid" aria-label="Weather sections">
              <div class="panel-card" aria-label="978 Uplink Relay">
                <div class="panel-card-head">
                  <div class="panel-card-title">978 Uplink Relay</div>
                  <div class="panel-card-subtitle">Health of the raw FIS-B stream.</div>
                </div>
                <div class="panel-card-body">
                  <div class="panel-kv">
                    <div class="panel-kv-row">
                      <span class="panel-kv-key">Raw Endpoint</span>
                      <span id="wx-raw-endpoint" class="panel-kv-val">--</span>
                    </div>
                    <div class="panel-kv-row">
                      <span class="panel-kv-key">State</span>
                      <span id="wx-raw-state" class="panel-kv-val">--</span>
                    </div>
                    <div class="panel-kv-row">
                      <span class="panel-kv-key">Lines</span>
                      <span id="wx-raw-lines" class="panel-kv-val">--</span>
                    </div>
                    <div class="panel-kv-row">
                      <span class="panel-kv-key">Last Seen (UTC)</span>
                      <span id="wx-raw-last-seen" class="panel-kv-val">--</span>
                    </div>
                    <div class="panel-kv-row">
                      <span class="panel-kv-key">Last Error</span>
                      <span id="wx-raw-error" class="panel-kv-val">--</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="view-towers" class="view" aria-label="Towers">
        <div class="status-panel status-panel-utility" aria-label="Towers status">
          <div class="status-panel-head">
            <div class="status-panel-lead">
              <div class="status-panel-title">Towers</div>
              <div class="status-panel-subtitle muted">Upstream Stratux shows nearby UAT ground stations; Stratux-NG will surface tower metadata when the decoder lands.</div>
            </div>
          </div>

          <div class="status-panel-body">
            <div class="panel-grid">
              <div class="panel-card" aria-label="Notes">
                <div class="panel-card-head">
                  <div class="panel-card-title">Notes</div>
                  <div class="panel-card-subtitle">Current limitations</div>
                </div>
                <div class="panel-card-body">
                  <div class="panel-kv">
                    <div class="panel-kv-row">
                      <span class="panel-kv-key">978 MHz</span>
                      <span class="panel-kv-val">Use the Weather page to monitor raw uplink health; tower metadata is not yet decoded.</span>
                    </div>
                    <div class="panel-kv-row">
                      <span class="panel-kv-key">1090 MHz</span>
                      <span class="panel-kv-val">Tower discovery will return once Stratux-NG parses ground-station traffic.</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="view-settings" class="view" aria-label="Settings">
        <div class="status-panel status-panel-form" aria-label="Settings form">
          <div class="status-panel-head">
            <div class="status-panel-lead">
              <div class="status-panel-title">Settings</div>
              <div class="status-panel-subtitle muted">Edits are saved to your YAML config and applied immediately.</div>
            </div>
          </div>

          <div class="status-panel-body">
            <form id="settings-form" class="panel-form" autocomplete="off">
              <div class="panel-form-group" aria-label="Web UI display settings">
                <div class="panel-card-head">
                  <div class="panel-card-title">Web UI Only (Display)</div>
                  <div class="panel-card-subtitle">Saved in this browser only; does not change emitted GDL90 data.</div>
                </div>
                <div class="panel-card-body">
                  <div class="panel-form-row">
                    <label for="ui-vsi-traffic-deadband">Traffic vertical speed deadband (fpm)</label>
                    <input id="ui-vsi-traffic-deadband" type="number" min="0" step="1" placeholder="50" />
                  </div>
                  <div class="panel-form-row">
                    <label for="ui-vsi-traffic-rounding">Traffic vertical speed rounding (fpm)</label>
                    <input id="ui-vsi-traffic-rounding" type="number" min="0" step="1" placeholder="10" />
                  </div>
                  <div class="panel-form-row">
                    <label for="ui-vsi-ownship-rounding">Ownship vertical speed rounding (fpm)</label>
                    <input id="ui-vsi-ownship-rounding" type="number" min="0" step="1" placeholder="10" />
                  </div>
                  <span id="ui-vsi-msg" class="panel-form-msg muted"></span>
                </div>
              </div>

              <div class="panel-form-group" aria-label="Configuration">
                <div class="panel-card-head">
                  <div class="panel-card-title">Configuration</div>
                  <div class="panel-card-subtitle">Persisted in Stratux-NG config.</div>
                </div>
                <div class="panel-card-body">
                  <div class="panel-form-row">
                    <label for="set-interval">Interval (e.g. 1s)</label>
                    <input id="set-interval" type="text" placeholder="1s" />
                  </div>
                  <div class="panel-form-row">
                    <label for="set-ownship-icao">Ownship ICAO (hex)</label>
                    <input id="set-ownship-icao" type="text" placeholder="F00000" />
                  </div>
                  <div class="panel-form-row">
                    <label for="set-ownship-callsign">Ownship callsign</label>
                    <input id="set-ownship-callsign" type="text" placeholder="STRATUX" />
                  </div>
                  <div class="panel-actions">
                    <button id="btn-save" type="submit" class="primary">Save</button>
                    <span id="save-msg" class="panel-form-msg muted"></span>
                  </div>
                </div>
              </div>

              <div class="panel-form-group" aria-label="Wi-Fi access point">
                <div class="panel-card-head">
                  <div class="panel-card-title">Wi-Fi Access Point</div>
                  <div class="panel-card-subtitle">SSID, password, and management IP for Stratux-NG AP mode.</div>
                </div>
                <div class="panel-card-body">
                  <div class="panel-form-row">
                    <label for="set-wifi-ap-ssid">SSID</label>
                    <input id="set-wifi-ap-ssid" type="text" placeholder="stratux" />
                  </div>
                  <div class="panel-form-row">
                    <label for="set-wifi-ap-pass">Password</label>
                    <input id="set-wifi-ap-pass" type="password" placeholder="(optional)" />
                  </div>
                  <div class="panel-form-row">
                    <label for="set-wifi-ap-ip">IP Address</label>
                    <input id="set-wifi-ap-ip" type="text" placeholder="192.168.10.1" />
                  </div>
                  <div class="panel-actions">
                    <button id="btn-save-ap" type="button" class="primary">Update AP</button>
                    <span id="save-ap-msg" class="panel-form-msg muted"></span>
                  </div>
                </div>
              </div>

              <div class="panel-form-group" aria-label="Wi-Fi client">
                <div class="panel-card-head">
                  <div class="panel-card-title">Wi-Fi Client</div>
                  <div class="panel-card-subtitle">Connect Stratux-NG to an upstream hotspot.</div>
                </div>
                <div class="panel-card-body">
                  <div class="panel-form-row">
                    <label for="set-wifi-client-ssid">SSID</label>
                    <input id="set-wifi-client-ssid" type="text" placeholder="Hotspot Name" />
                  </div>
                  <div class="panel-form-row">
                    <label for="set-wifi-client-pass">Password</label>
                    <input id="set-wifi-client-pass" type="password" placeholder="Password" />
                  </div>
                  <div class="panel-kv panel-form-kv">
                    <div class="panel-kv-row">
                      <span class="panel-kv-key">Status</span>
                      <span id="st-wifi-client-state" class="panel-kv-val">--</span>
                    </div>
                    <div class="panel-kv-row">
                      <span class="panel-kv-key">IP</span>
                      <span id="st-wifi-client-ip" class="panel-kv-val">--</span>
                    </div>
                  </div>
                  <div class="panel-actions">
                    <button id="btn-save-client" type="button" class="primary">Connect Client</button>
                    <span id="save-client-msg" class="panel-form-msg muted"></span>
                  </div>
                </div>
              </div>

              <div class="panel-form-group" aria-label="AHRS calibration">
                <div class="panel-card-head">
                  <div class="panel-card-title">AHRS Calibration</div>
                  <div class="panel-card-subtitle">Commands affect the connected AHRS immediately.</div>
                </div>
                <div class="panel-card-body">
                  <div class="panel-button-row">
                    <button id="btn-ahrs-level" type="button">Set Level</button>
                    <button id="btn-ahrs-zero-drift" type="button">Zero Drift</button>
                    <button id="btn-ahrs-orient-forward" type="button">Set Forward (hold so nose-end points up)</button>
                    <button id="btn-ahrs-orient-done" type="button">Finish Orientation (hold level, mounted)</button>
                  </div>
                  <span id="ahrs-msg" class="panel-form-msg muted"></span>
                </div>
              </div>
            </form>
          </div>
        </div>
      </section>

      <section id="view-logs" class="view" aria-label="Logs">
        <div class="status-panel status-panel-utility" aria-label="Logs view">
          <div class="status-panel-head">
            <div class="status-panel-lead">
              <div class="status-panel-title">Logs</div>
              <div class="status-panel-subtitle muted">Recent Stratux-NG logs from <a href="/api/logs?format=text">/api/logs</a>.</div>
            </div>
          </div>

          <div class="status-panel-body">
            <div class="panel-grid">
              <div class="panel-card" aria-label="Log controls">
                <div class="panel-card-head">
                  <div class="panel-card-title">Controls</div>
                  <div class="panel-card-subtitle">Select a tail length and refresh.</div>
                </div>
                <div class="panel-card-body">
                  <div class="panel-form-row">
                    <label for="logs-tail">Tail</label>
                    <select id="logs-tail">
                      <option value="200" selected>200 lines</option>
                      <option value="500">500 lines</option>
                      <option value="2000">2000 lines</option>
                    </select>
                  </div>
                  <div class="panel-actions">
                    <button id="logs-refresh" type="button" class="primary">Refresh</button>
                    <span id="logs-meta" class="panel-form-msg muted"></span>
                  </div>
                </div>
              </div>

              <div class="panel-card panel-card-wide" aria-label="Log output">
                <div class="panel-card-head">
                  <div class="panel-card-title">Output</div>
                  <div class="panel-card-subtitle">Latest lines streamed from Stratux-NG.</div>
                </div>
                <div class="panel-card-body">
                  <pre id="logs-text" class="panel-pre">Loading…</pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="view-about" class="view" aria-label="About">
        <div class="status-panel status-panel-utility" aria-label="About view">
          <div class="status-panel-head">
            <div class="status-panel-lead">
              <div class="status-panel-title">About</div>
              <div class="status-panel-subtitle muted">Build/runtime details and diagnostics.</div>
            </div>
          </div>

          <div class="status-panel-body">
            <div class="panel-grid">
              <div class="panel-card" aria-label="Diagnostics">
                <div class="panel-card-head">
                  <div class="panel-card-title">Diagnostics</div>
                  <div class="panel-card-subtitle">Raw build/runtime JSON.</div>
                </div>
                <div class="panel-card-body">
                  <p class="muted">Use the API endpoint to pull the exact Stratux-NG build info, git hash, and runtime wiring used for debugging.</p>
                  <a class="panel-link" href="/api/about">/api/about</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

    </main>

    <nav class="bottomnav" aria-label="Primary">
      <button class="navbtn" data-view="attitude" aria-label="Attitude">
        <span class="navlabel">Attitude</span>
      </button>
      <button class="navbtn" data-view="radar" aria-label="Radar">
        <span class="navlabel">Radar</span>
      </button>
      <button class="navbtn" data-view="map" aria-label="Map">
        <span class="navlabel">Map</span>
      </button>
    </nav>

    <div id="drawer-backdrop" class="backdrop" hidden></div>
    <aside id="drawer" class="drawer" aria-label="More" hidden>
      <div class="drawer-head">
        <div class="drawer-title">More</div>
        <button id="btn-close" class="iconbtn" aria-label="Close menu" title="Close">✕</button>
      </div>
      <div class="drawer-body">
        <button class="drawer-item drawerbtn" data-view="status" type="button">Status</button>
        <button class="drawer-item drawerbtn" data-view="traffic" type="button">Traffic</button>
        <button class="drawer-item drawerbtn" data-view="weather" type="button">Weather</button>
        <button class="drawer-item drawerbtn" data-view="towers" type="button">Towers</button>
        <button class="drawer-item drawerbtn" data-view="settings" type="button">Settings</button>
        <button class="drawer-item drawerbtn" data-view="logs" type="button">Logs</button>
        <button class="drawer-item drawerbtn" data-view="about" type="button">About</button>
      </div>
    </aside>

    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
    <script src="/assets/app.js"></script>
  </body>
</html>
